<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>
   How to snap shapes positions on canvas with Konva? | Konva - JavaScript 2d canvas
  library
</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="canonical" href="https://konvajs.org/docs/sandbox/Objects_Snapping.html">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/android-chrome-manifest.json">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff"> <link rel="stylesheet" href="/css/style.css">
<link href="//fonts.googleapis.com/css?family=Lato:300,700" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
<link rel="alternate" href="/atom.xml" title="Konva.js - JavaScript 2d canvas library"> <meta name="description" content="How to snap canvas shape to other shapes?This demo will demonstrate how to implement snapping of objects to all edges of the stage on to all edges of other objects. Also I found another related demos">
<meta property="og:type" content="website">
<meta property="og:title" content="How to snap shapes positions on canvas with Konva?">
<meta property="og:url" content="https://konvajs.org/docs/sandbox/Objects_Snapping.html">
<meta property="og:site_name" content="Konva.js - JavaScript 2d canvas library">
<meta property="og:description" content="How to snap canvas shape to other shapes?This demo will demonstrate how to implement snapping of objects to all edges of the stage on to all edges of other objects. Also I found another related demos">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://konvajs.org/logo.png">
<meta property="og:updated_time" content="2019-06-21T14:41:12.769Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to snap shapes positions on canvas with Konva?">
<meta name="twitter:description" content="How to snap canvas shape to other shapes?This demo will demonstrate how to implement snapping of objects to all edges of the stage on to all edges of other objects. Also I found another related demos">
<meta name="twitter:image" content="https://konvajs.org/logo.png">
<meta name="twitter:site" content="@lavrton"> 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54202824-2', 'konvajs.org');
  ga('send', 'pageview');
</script>


  </head>
  <body>
    <header id="header">
  <div class="outer">
    <div class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Konva</a>
        <a id="main-nav-toggle"></a>
      </h1>
      <nav id="main-nav">
        <ul id="main-nav-list">
          
          <li class="main-nav-item">
            <a href="/docs/" class="main-nav-link">
              Tutorials
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/docs/sandbox" class="main-nav-link">
              Demos
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/api/Konva.html" class="main-nav-link">
              API docs
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/docs/react" class="main-nav-link">
              React
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/docs/vue" class="main-nav-link">
              Vue
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/docs/donate.html" class="main-nav-link">
              Support Konva
            </a>
          </li>
          
          <li class="main-nav-item">
            <a href="/docs/support.html" class="main-nav-link">
              Need help?
            </a>
          </li>
          
          <li class="main-nav-item">
            <input id="search" placeholder="Search the docs">
          </li>
          <li class="main-nav-item">
            <a href="https://lavrton.com/consulting" title="Consulting" target="_blank" class="main-nav-link" style="color: white;background: #0bad42;padding: 10px;border-radius: 10px;">Consulting</a>
          </li>
        </ul>

        <a href="https://github.com/konvajs/konva" id="github-btn" title="GitHub" target="_blank"></a>
        <!--
          <a id="search-btn" class="st-search-launcher" title="Search"></a>
        -->
      </nav>
    </div>
  </div>
</header>
 <article class="page" itemscope="" itemtype="http://schema.org/Article">
  <header id="page-banner">
    <div class="outer">
      <div id="page-banner-inner" class="inner">
        <h1 id="page-title" itemprop="name">
          How to snap shapes positions on canvas with Konva?
        </h1>
        <a href="https://github.com/konvajs/site/blob/master/source/docs/sandbox/Objects_Snapping.md" title="Improve this doc" id="page-edit-link"></a>
      </div>
    </div>
  </header>
  <div class="outer">
    <div id="mobile-menu-wrap"></div>
    <div class="page-content">
      <!--<div class="toc-wrap">-->
      <!--<strong class="toc-title">Contents</strong>-->
      <!--<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-snap-canvas-shape-to-other-shapes"><span class="toc-number">1.</span> <span class="toc-text">How to snap canvas shape to other shapes?</span></a></li></ol>-->
      <!--</div>-->
      <div class="page-entry" itemprop="articleBody">
        <h2 id="How-to-snap-canvas-shape-to-other-shapes"><a href="#How-to-snap-canvas-shape-to-other-shapes" class="headerlink" title="How to snap canvas shape to other shapes?"></a>How to snap canvas shape to other shapes?</h2><p>This demo will demonstrate how to implement snapping of objects to all edges of the stage on to all edges of other objects.</p>
<p>Also I found another related demos on the internet that may be useful:</p>
<ol>
<li>Post: <a href="https://medium.com/@pierrebleroux/snap-to-grid-with-konvajs-c41eae97c13f" target="_blank" rel="noopener">https://medium.com/@pierrebleroux/snap-to-grid-with-konvajs-c41eae97c13f</a></li>
<li>Demo:<a href="https://codepen.io/pierrebleroux/pen/gGpvxJ" target="_blank" rel="noopener">https://codepen.io/pierrebleroux/pen/gGpvxJ</a></li>
</ol>
<p><em>Instruction:</em> try to drag and object. See how it snaps to other objects.</p>
<iframe src="/downloads/code/sandbox/Objects_Snapping.html" width="100%" height="300" frameborder="0" allowfullscreen></iframe>
<figure class="highlight html"><figcaption><span>Konva Custom Font</span><a href="/downloads/code/sandbox/Objects_Snapping.html">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/konva@3.4.1/konva.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Konva Snapping of shapes Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      body {</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">        padding: 0;</span></span><br><span class="line"><span class="undefined">        overflow: hidden;</span></span><br><span class="line"><span class="undefined">        background-color: #f0f0f0;</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> width = <span class="built_in">window</span>.innerWidth;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> height = <span class="built_in">window</span>.innerHeight;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> GUIDELINE_OFFSET = <span class="number">5</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> stage = <span class="keyword">new</span> Konva.Stage({</span></span><br><span class="line"><span class="javascript">        container: <span class="string">'container'</span>,</span></span><br><span class="line"><span class="undefined">        width: width,</span></span><br><span class="line"><span class="undefined">        height: height</span></span><br><span class="line"><span class="undefined">      });</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> layer = <span class="keyword">new</span> Konva.Layer();</span></span><br><span class="line"><span class="undefined">      stage.add(layer);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// first generate random rectangles</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {</span></span><br><span class="line"><span class="undefined">        layer.add(</span></span><br><span class="line"><span class="javascript">          <span class="keyword">new</span> Konva.Rect({</span></span><br><span class="line"><span class="javascript">            x: <span class="built_in">Math</span>.random() * stage.width(),</span></span><br><span class="line"><span class="javascript">            y: <span class="built_in">Math</span>.random() * stage.height(),</span></span><br><span class="line"><span class="javascript">            width: <span class="number">50</span> + <span class="built_in">Math</span>.random() * <span class="number">50</span>,</span></span><br><span class="line"><span class="javascript">            height: <span class="number">50</span> + <span class="built_in">Math</span>.random() * <span class="number">50</span>,</span></span><br><span class="line"><span class="undefined">            fill: Konva.Util.getRandomColor(),</span></span><br><span class="line"><span class="javascript">            rotation: <span class="built_in">Math</span>.random() * <span class="number">360</span>,</span></span><br><span class="line"><span class="javascript">            draggable: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">            name: <span class="string">'object'</span></span></span><br><span class="line"><span class="undefined">          })</span></span><br><span class="line"><span class="undefined">        );</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// were can we snap our objects?</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">getLineGuideStops</span>(<span class="params">skipShape</span>) </span>{</span></span><br><span class="line"><span class="javascript">        <span class="comment">// we can snap to stage borders and the center of the stage</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vertical = [<span class="number">0</span>, stage.width() / <span class="number">2</span>, stage.width()];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> horizontal = [<span class="number">0</span>, stage.height() / <span class="number">2</span>, stage.height()];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// and we snap over edges and center of each object on the canvas</span></span></span><br><span class="line"><span class="javascript">        stage.find(<span class="string">'.object'</span>).forEach(<span class="function"><span class="params">guideItem</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (guideItem === skipShape) {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">          }</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> box = guideItem.getClientRect();</span></span><br><span class="line"><span class="javascript">          <span class="comment">// and we can snap to all edges of shapes</span></span></span><br><span class="line"><span class="undefined">          vertical.push([box.x, box.x + box.width, box.x + box.width / 2]);</span></span><br><span class="line"><span class="undefined">          horizontal.push([box.y, box.y + box.height, box.y + box.height / 2]);</span></span><br><span class="line"><span class="undefined">        });</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> {</span></span><br><span class="line"><span class="undefined">          vertical: vertical.flat(),</span></span><br><span class="line"><span class="undefined">          horizontal: horizontal.flat()</span></span><br><span class="line"><span class="undefined">        };</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// what points of the object will trigger to snapping?</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// it can be just center of the object</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// but we will enable all edges and center</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">getObjectSnappingEdges</span>(<span class="params">node</span>) </span>{</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> box = node.getClientRect();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> {</span></span><br><span class="line"><span class="undefined">          vertical: [</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.x),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.x() - box.x),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'start'</span></span></span><br><span class="line"><span class="undefined">            },</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.x + box.width / <span class="number">2</span>),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.x() - box.x - box.width / <span class="number">2</span>),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'center'</span></span></span><br><span class="line"><span class="undefined">            },</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.x + box.width),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.x() - box.x - box.width),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'end'</span></span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="undefined">          ],</span></span><br><span class="line"><span class="undefined">          horizontal: [</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.y),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.y() - box.y),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'start'</span></span></span><br><span class="line"><span class="undefined">            },</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.y + box.height / <span class="number">2</span>),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.y() - box.y - box.height / <span class="number">2</span>),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'center'</span></span></span><br><span class="line"><span class="undefined">            },</span></span><br><span class="line"><span class="undefined">            {</span></span><br><span class="line"><span class="javascript">              guide: <span class="built_in">Math</span>.round(box.y + box.height),</span></span><br><span class="line"><span class="javascript">              offset: <span class="built_in">Math</span>.round(node.y() - box.y - box.height),</span></span><br><span class="line"><span class="javascript">              snap: <span class="string">'end'</span></span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="undefined">          ]</span></span><br><span class="line"><span class="undefined">        };</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// find all snapping possibilities</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">getGuides</span>(<span class="params">lineGuideStops, itemBounds</span>) </span>{</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> resultV = [];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> resultH = [];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        lineGuideStops.vertical.forEach(<span class="function"><span class="params">lineGuide</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          itemBounds.vertical.forEach(<span class="function"><span class="params">itemBound</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> diff = <span class="built_in">Math</span>.abs(lineGuide - itemBound.guide);</span></span><br><span class="line"><span class="javascript">            <span class="comment">// if the distance between guild line and object snap point is close we can consider this for snapping</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (diff &lt; GUIDELINE_OFFSET) {</span></span><br><span class="line"><span class="undefined">              resultV.push({</span></span><br><span class="line"><span class="undefined">                lineGuide: lineGuide,</span></span><br><span class="line"><span class="undefined">                diff: diff,</span></span><br><span class="line"><span class="undefined">                snap: itemBound.snap,</span></span><br><span class="line"><span class="undefined">                offset: itemBound.offset</span></span><br><span class="line"><span class="undefined">              });</span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="undefined">          });</span></span><br><span class="line"><span class="undefined">        });</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        lineGuideStops.horizontal.forEach(<span class="function"><span class="params">lineGuide</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          itemBounds.horizontal.forEach(<span class="function"><span class="params">itemBound</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> diff = <span class="built_in">Math</span>.abs(lineGuide - itemBound.guide);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (diff &lt; GUIDELINE_OFFSET) {</span></span><br><span class="line"><span class="undefined">              resultH.push({</span></span><br><span class="line"><span class="undefined">                lineGuide: lineGuide,</span></span><br><span class="line"><span class="undefined">                diff: diff,</span></span><br><span class="line"><span class="undefined">                snap: itemBound.snap,</span></span><br><span class="line"><span class="undefined">                offset: itemBound.offset</span></span><br><span class="line"><span class="undefined">              });</span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="undefined">          });</span></span><br><span class="line"><span class="undefined">        });</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> guides = [];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// find closest snap</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> minV = resultV.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.diff - b.diff)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> minH = resultH.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.diff - b.diff)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (minV) {</span></span><br><span class="line"><span class="undefined">          guides.push({</span></span><br><span class="line"><span class="undefined">            lineGuide: minV.lineGuide,</span></span><br><span class="line"><span class="undefined">            offset: minV.offset,</span></span><br><span class="line"><span class="javascript">            orientation: <span class="string">'V'</span>,</span></span><br><span class="line"><span class="undefined">            snap: minV.snap</span></span><br><span class="line"><span class="undefined">          });</span></span><br><span class="line"><span class="undefined">        }</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (minH) {</span></span><br><span class="line"><span class="undefined">          guides.push({</span></span><br><span class="line"><span class="undefined">            lineGuide: minH.lineGuide,</span></span><br><span class="line"><span class="undefined">            offset: minH.offset,</span></span><br><span class="line"><span class="javascript">            orientation: <span class="string">'H'</span>,</span></span><br><span class="line"><span class="undefined">            snap: minH.snap</span></span><br><span class="line"><span class="undefined">          });</span></span><br><span class="line"><span class="undefined">        }</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> guides;</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">drawGuides</span>(<span class="params">guides</span>) </span>{</span></span><br><span class="line"><span class="javascript">        guides.forEach(<span class="function"><span class="params">lg</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (lg.orientation === <span class="string">'H'</span>) {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> line = <span class="keyword">new</span> Konva.Line({</span></span><br><span class="line"><span class="undefined">              points: [-6000, lg.lineGuide, 6000, lg.lineGuide],</span></span><br><span class="line"><span class="javascript">              stroke: <span class="string">'rgb(0, 161, 255)'</span>,</span></span><br><span class="line"><span class="undefined">              strokeWidth: 1,</span></span><br><span class="line"><span class="javascript">              name: <span class="string">'guid-line'</span>,</span></span><br><span class="line"><span class="undefined">              dash: [4, 6]</span></span><br><span class="line"><span class="undefined">            });</span></span><br><span class="line"><span class="undefined">            layer.add(line);</span></span><br><span class="line"><span class="undefined">            layer.batchDraw();</span></span><br><span class="line"><span class="javascript">          } <span class="keyword">else</span> <span class="keyword">if</span> (lg.orientation === <span class="string">'V'</span>) {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> line = <span class="keyword">new</span> Konva.Line({</span></span><br><span class="line"><span class="undefined">              points: [lg.lineGuide, -6000, lg.lineGuide, 6000],</span></span><br><span class="line"><span class="javascript">              stroke: <span class="string">'rgb(0, 161, 255)'</span>,</span></span><br><span class="line"><span class="undefined">              strokeWidth: 1,</span></span><br><span class="line"><span class="javascript">              name: <span class="string">'guid-line'</span>,</span></span><br><span class="line"><span class="undefined">              dash: [4, 6]</span></span><br><span class="line"><span class="undefined">            });</span></span><br><span class="line"><span class="undefined">            layer.add(line);</span></span><br><span class="line"><span class="undefined">            layer.batchDraw();</span></span><br><span class="line"><span class="undefined">          }</span></span><br><span class="line"><span class="undefined">        });</span></span><br><span class="line"><span class="undefined">      }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      layer.on(<span class="string">'dragmove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{</span></span><br><span class="line"><span class="javascript">        <span class="comment">// clear all previous lines on the screen</span></span></span><br><span class="line"><span class="javascript">        layer.find(<span class="string">'.guid-line'</span>).destroy();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// find possible snapping lines</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> lineGuideStops = getLineGuideStops(e.target);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// find snapping points of current object</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> itemBounds = getObjectSnappingEdges(e.target);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// now find where can we snap current object</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> guides = getGuides(lineGuideStops, itemBounds);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// do nothing of no snapping</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!guides.length) {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">        }</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        drawGuides(guides);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// now force object position</span></span></span><br><span class="line"><span class="javascript">        guides.forEach(<span class="function"><span class="params">lg</span> =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">switch</span> (lg.snap) {</span></span><br><span class="line"><span class="javascript">            <span class="keyword">case</span> <span class="string">'start'</span>: {</span></span><br><span class="line"><span class="javascript">              <span class="keyword">switch</span> (lg.orientation) {</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'V'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.x(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'H'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.y(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="undefined">              }</span></span><br><span class="line"><span class="javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="javascript">            <span class="keyword">case</span> <span class="string">'center'</span>: {</span></span><br><span class="line"><span class="javascript">              <span class="keyword">switch</span> (lg.orientation) {</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'V'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.x(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'H'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.y(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="undefined">              }</span></span><br><span class="line"><span class="javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="javascript">            <span class="keyword">case</span> <span class="string">'end'</span>: {</span></span><br><span class="line"><span class="javascript">              <span class="keyword">switch</span> (lg.orientation) {</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'V'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.x(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="javascript">                <span class="keyword">case</span> <span class="string">'H'</span>: {</span></span><br><span class="line"><span class="undefined">                  e.target.y(lg.lineGuide + lg.offset);</span></span><br><span class="line"><span class="javascript">                  <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                }</span></span><br><span class="line"><span class="undefined">              }</span></span><br><span class="line"><span class="javascript">              <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">            }</span></span><br><span class="line"><span class="undefined">          }</span></span><br><span class="line"><span class="undefined">        });</span></span><br><span class="line"><span class="undefined">      });</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      layer.on(<span class="string">'dragend'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{</span></span><br><span class="line"><span class="javascript">        <span class="comment">// clear all previous lines on the screen</span></span></span><br><span class="line"><span class="javascript">        layer.find(<span class="string">'.guid-line'</span>).destroy();</span></span><br><span class="line"><span class="undefined">        layer.batchDraw();</span></span><br><span class="line"><span class="undefined">      });</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      layer.draw();</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      </div>
      <footer id="page-footer">
        <time id="page-footer-updated" datetime="2019-06-21T14:41:12.769Z" itemprop="dateModified">Last updated:
          Jun 21 2019
        </time>
        <a href="/docs/index.html" id="page-footer-next" title="Intro">Next</a>
      </footer>
      
<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

    </div>
    <aside id="sidebar">
  
    <strong class="sidebar-title">
      Demos
    </strong>
    
      <a href="/docs/sandbox/Free_Drawing.html" class="sidebar-link">
        Free Drawing
      </a>
      
      <a href="/docs/sandbox/Editable_Text.html" class="sidebar-link">
        Editable Text
      </a>
      
      <a href="/docs/sandbox/Rich_Text.html" class="sidebar-link">
        Rich Text
      </a>
      
      <a href="/docs/sandbox/Simple_Window_Frame.html" class="sidebar-link">
        Simple Window Frame
      </a>
      
      <a href="/docs/sandbox/Window_Frame_Designer.html" class="sidebar-link">
        Window Frame Designer
      </a>
      
      <a href="/docs/sandbox/Collision_Detection.html" class="sidebar-link">
        Collision Detection
      </a>
      
      <a href="/docs/sandbox/Zoom_Layer_On_hover.html" class="sidebar-link">
        Zoom Layer On hover
      </a>
      
      <a href="/docs/sandbox/Responsive_Canvas.html" class="sidebar-link">
        Responsive Canvas Stage
      </a>
      
      <a href="/docs/sandbox/Canvas_Scrolling.html" class="sidebar-link">
        Canvas Scrolling
      </a>
      
      <a href="/docs/sandbox/Connected_Objects.html" class="sidebar-link">
        Connected Objects
      </a>
      
      <a href="/docs/sandbox/Zooming_Relative_To_Pointer.html" class="sidebar-link">
        Relative Zoom
      </a>
      
      <a href="/docs/sandbox/Wheel_of_Fortune.html" class="sidebar-link">
        Wheel of Fortune
      </a>
      
      <a href="/docs/sandbox/Quantum_Squiggle.html" class="sidebar-link">
        Quantum Squiggle
      </a>
      
      <a href="/docs/sandbox/20000_Nodes.html" class="sidebar-link">
        20000 Nodes
      </a>
      
      <a href="/docs/sandbox/Elastic_Stars.html" class="sidebar-link">
        Elastic Stars
      </a>
      
      <a href="/docs/sandbox/Objects_Snapping.html" class="sidebar-link current">
        Objects Snapping
      </a>
      
      <a href="/docs/sandbox/Shape_Tango.html" class="sidebar-link">
        Shape Tango
      </a>
      
      <a href="/docs/sandbox/Multi-touch_Scale_Shape.html" class="sidebar-link">
        Multi-touch Scale Shape
      </a>
      
      <a href="/docs/sandbox/Multi-touch_Scale_Stage.html" class="sidebar-link">
        Multi-touch Scale Stage
      </a>
      
      <a href="/docs/sandbox/Interactive_Building_Map.html" class="sidebar-link">
        Interactive Building Map
      </a>
      
      <a href="/docs/sandbox/Modify_Curves_with_Anchor_Points.html" class="sidebar-link">
        Modify Curves with Anchor Points
      </a>
      
      <a href="/docs/sandbox/Drag_and_Drop_Stress_Test.html" class="sidebar-link">
        Drag and Drop Stress Test
      </a>
      
      <a href="/docs/sandbox/Animals_on_the_Beach_Game.html" class="sidebar-link">
        Animals on the Beach Game
      </a>
      
      <a href="/docs/sandbox/Animation_Stress_Test.html" class="sidebar-link">
        Animation Stress Test
      </a>
      
      <a href="/docs/sandbox/Jumping_Bunnies.html" class="sidebar-link">
        Bunnies Stress Test
      </a>
      
      <a href="/docs/sandbox/10000_Shapes_with_Tooltip.html" class="sidebar-link">
        10000 Shapes with Tooltips
      </a>
      
      <a href="/docs/sandbox/Modify_Shape_Color_on_Click.html" class="sidebar-link">
        Modify Shape Color on Click
      </a>
      
      <a href="/docs/sandbox/Physics_Simulator.html" class="sidebar-link">
        Physics Simulator
      </a>
      
      <a href="/docs/sandbox/Expand_Images_on_Hover.html" class="sidebar-link">
        Expand Images on Hover
      </a>
      
      <a href="/docs/sandbox/Planets_Image_Map.html" class="sidebar-link">
        Planets Image Map
      </a>
      
      <a href="/docs/sandbox/Image_Resize.html" class="sidebar-link">
        Image Resize
      </a>
      
      <a href="/docs/sandbox/Shape_Tooltips.html" class="sidebar-link">
        Shape Tooltips
      </a>
      
      <a href="/docs/sandbox/Star_Spinner.html" class="sidebar-link">
        Star Spinner
      </a>
      
      <a href="/docs/sandbox/Drag_and_Drop_Multiple_Shapes.html" class="sidebar-link">
        Drag and Drop Multiple Shapes
      </a>
      
      <a href="/docs/sandbox/Image_Border_Highlighting.html" class="sidebar-link">
        Image Border Highlighting
      </a>
      
      <a href="/docs/sandbox/GIF_On_Canvas.html" class="sidebar-link">
        GIF Animation
      </a>
      
      <a href="/docs/sandbox/Relative_Pointer_Position.html" class="sidebar-link">
        Relative Pointer Position
      </a>
      
      <a href="/docs/sandbox/Drop_DOM_Element.html" class="sidebar-link">
        Drop DOM Element
      </a>
      
      <a href="/docs/sandbox/Custom_Font.html" class="sidebar-link">
        Custom Font
      </a>
      
      <a href="/docs/sandbox/Video_On_Canvas.html" class="sidebar-link">
        Video On Canvas
      </a>
      
      <a href="/docs/sandbox/Native_Context_Access.html" class="sidebar-link">
        Native Context Access
      </a>
      
      <a href="/docs/sandbox/SVG_On_Canvas.html" class="sidebar-link">
        SVG On Canvas
      </a>
      
      <a href="/docs/sandbox/Seats_Reservation.html" class="sidebar-link">
        Seats Reservation
      </a>
      
        
</aside>
  </div>
</article> <footer id="footer">
  <div class="outer">
    <div class="inner">
      <div id="footer-copyright">
        &copy; 2019 KonvaJS<br>
      </div>
      <div id="footer-links">
        <a href="https://twitter.com/lavrton" id="footer-link-twitter" class="footer-link" target="_blank"><span>Twitter</span></a>
        <a href="https://github.com/konvajs/konva" id="footer-link-github" class="footer-link" target="_blank"><span>GitHub</span></a>
      </div>
    </div>
    <div class="inner">
      <div class="footer-resources">
        <h3>Docs</h3>
        <ul>
          <li><a href="/docs">Tutorials</a></li>
          <li><a href="/docs/overview.html">General Overview</a></li>
          <li><a href="/api/Konva.html">API doc</a></li>

          <li><a href="/docs/sandbox/">Demos</a></li>
          <li><a href="/docs/react/">Usage with React</a></li>
          <li><a href="/docs/vue/">Usage with Vue</a></li>
          <li>
            <a href="https://github.com/konvajs/konva/blob/master/CHANGELOG.md">Changelog</a>
          </li>
        </ul>
      </div>
      <div class="footer-resources">
        <h3>CHANNELS</h3>
        <ul>
          <li>
            <a href="https://github.com/konvajs/konva" target="_blank">GitHub</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/konvajs" target="_blank">StackOverflow</a>
          </li>
          <li><a href="https://gitter.im/konvajs/konva" target="_blank">GitTip chat</a></li>
          <li>
            <a href="https://github.com/konvajs/konva/blob/master/CHANGELOG.md" target="_blank">Changelog</a>
          </li>
        </ul>
        
      </div>
      <div class="footer-resources">
          <h3>More</h3>
          <ul>
            <li>
              <a href="/docs/support.html">Need help?</a>
            </li>
            <li>
              <a href="/docs/donate.html" target="_blank">Donate</a>
            </li>
          </ul>
    </div>
  </div>
  <script>
    ((window.gitter = {}).chat = {}).options = {
      room: 'konvajs/konva'
    };
  </script>
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
</div></footer>
 
<!-- Disqus -->
<script>
  var disqus_shortname = 'konvajs';
  
  var disqus_url = 'https://konvajs.org/docs/sandbox/Objects_Snapping.html';
  
    (function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//go.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<!-- Swiftype -->
<!--
  <script>
    var Swiftype = window.Swiftype || {};
    (function () {
      Swiftype.key = 'rRaQRFqx1DcWDDysdpg_';

      /** DO NOT EDIT BELOW THIS LINE **/
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = "//s.swiftypecdn.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>
-->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  docsearch({
    apiKey: '031987a5aa012671236e1d4992009b4f',
    indexName: 'konvajs',
    inputSelector: '#search',
    algoliaOptions: {
      hitsPerPage: 10
      // See https://www.algolia.com/doc/api-reference/api-parameters/
    },
    // transformData: function (suggestions) {
    //   // Transform the list of suggestions, and the return the updated list
    //   suggestions.sort(function (a, b) {
    //     if (a.url.indexOf('/api/') >= 0) {
    //       return 1;
    //     } else {
    //       return -1;
    //     }
    //   });
    //   return suggestions.slice(0, 10);
    // },
    debug: true // Set debug to true if you want to inspect the dropdown
  });
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/retina.min.js"></script> <script src="/js/script.js"></script>
<!-- Google+ -->
<script type="text/javascript" src="//apis.google.com/js/plusone.js"></script>
<!-- Twitter -->
<script>
  !(function(d, s, id) {
    var js,
      fjs = d.getElementsByTagName(s)[0],
      p = /^http:/.test(d.location) ? 'http' : 'https';
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id = id;
      js.src = p + '://platform.twitter.com/widgets.js';
      fjs.parentNode.insertBefore(js, fjs);
    }
  })(document, 'script', 'twitter-wjs');
</script>

  </body>
</html>
